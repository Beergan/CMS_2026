@* 
    Helper partial views tương tự MyHtml
    Usage: @await Html.PartialAsync("_Shared/_FormHelpers", new { Helper = "TextBoxFor", FieldName = "Title", FieldTitle = "Tiêu đề", Value = model.Title, Required = true })
*@
@using CMS_2026.Common

@{
    var helper = ViewData["Helper"] as string ?? "";
    var fieldName = ViewData["FieldName"] as string ?? "";
    var fieldTitle = ViewData["FieldTitle"] as string ?? "";
    var value = ViewData["Value"] as string ?? "";
    var required = (bool)(ViewData["Required"] ?? false);
    var disabled = (bool)(ViewData["Disabled"] ?? false);
    var placeholder = ViewData["Placeholder"] as string ?? "";
    var options = ViewData["Options"] as Dictionary<string, string> ?? new Dictionary<string, string>();
    var selectedValue = ViewData["SelectedValue"] as string ?? "";
}

@if (helper == "TextBoxFor")
{
    <div class="form-group row">
        <label originId="@fieldName" for="@fieldName" class="col-12 col-md-2 col-form-label">
            @fieldTitle
            @if (required)
            {
                <span class="text-danger">*</span>
            }
        </label>
        <div class="col-12 col-md-10">
            <input class="form-control" type="text" 
                   @(required ? "required" : "") 
                   @(disabled ? "disabled" : "")
                   parsley-type="text"
                   originId="@fieldName"
                   name="@fieldName"
                   id="@fieldName"
                   placeholder="@placeholder"
                   value="@value">
        </div>
    </div>
}
else if (helper == "TextAreaFor")
{
    <div class="form-group row">
        <label originId="@fieldName" for="@fieldName" class="col-12 col-md-2 col-form-label">
            @fieldTitle
            @if (required)
            {
                <span class="text-danger">*</span>
            }
        </label>
        <div class="col-12 col-md-10">
            <textarea class="form-control" 
                      @(required ? "required" : "")
                      parsley-type="text"
                      originId="@fieldName"
                      name="@fieldName"
                      id="@fieldName"
                      placeholder="@placeholder" rows="7">@Html.Raw(value)</textarea>
        </div>
    </div>
}
else if (helper == "RichTextAreaFor")
{
    <div class="form-group row">
        <label originId="@fieldName" for="@fieldName" class="col-12 col-md-2 col-form-label">
            @fieldTitle
            @if (required)
            {
                <span class="text-danger">*</span>
            }
        </label>
        <div class="col-12 col-md-10">
            <textarea class="form-control myckeditor" 
                      @(required ? "required" : "")
                      originId="@fieldName"
                      name="@fieldName"
                      id="@fieldName"
                      placeholder="@placeholder" rows="7" myckeditor>@Html.Raw(value)</textarea>
        </div>
    </div>
}
else if (helper == "ComboboxFor")
{
    <div class="form-group row">
        <label originId="@fieldName" class="col-12 col-md-2 col-form-label" for="@fieldName">
            @fieldTitle
            @if (required)
            {
                <span class="text-danger">*</span>
            }
        </label>
        <div class="col-12 col-md-10">
            <select class="form-control" originId="@fieldName" id="@fieldName" name="@fieldName" @(disabled ? "disabled" : "")>
                @foreach (var item in options)
                {
                    var isSelected = item.Key == selectedValue;
                    <option value="@item.Key" selected="@isSelected">@item.Value</option>
                }
            </select>
        </div>
    </div>
}
else if (helper == "NumberBoxFor")
{
    <div class="form-group row">
        <label originId="@fieldName" for="@fieldName" class="col-12 col-md-2 col-form-label">
            @fieldTitle
            @if (required)
            {
                <span class="text-danger">*</span>
            }
        </label>
        <div class="col-12 col-md-10">
            <input class="form-control" type="number" 
                   @(required ? "required" : "")
                   @(disabled ? "disabled" : "")
                   parsley-type="number"
                   originId="@fieldName"
                   name="@fieldName"
                   id="@fieldName"
                   placeholder="@placeholder"
                   value="@value">
        </div>
    </div>
}
else if (helper == "RadioFor")
{
    <div class="form-group row">
        <label originId="@fieldName" class="col-12 col-md-2 col-form-label" for="@fieldName">
            @fieldTitle
        </label>
        <div class="col-12 col-md-10">
            <input type="checkbox" originId="@fieldName" name="@fieldName" id="@fieldName" 
                   value="true" @(value == "true" ? "checked" : "")
                   data-plugin="switchery" data-color="#3ec396" />
        </div>
    </div>
}
else if (helper == "TagsInputFor")
{
    <div class="form-group row">
        <label originId="@fieldName" for="@fieldName" class="col-12 col-md-2 col-form-label">
            @fieldTitle
            @if (required)
            {
                <span class="text-danger">*</span>
            }
        </label>
        <div class="col-12 col-md-10">
            <input class="form-control" type="text" 
                   @(required ? "required" : "")
                   data-role="tagsinput"
                   originId="@fieldName"
                   name="@fieldName"
                   id="@fieldName"
                   placeholder="@placeholder"
                   value="@value">
        </div>
    </div>
}
else if (helper == "ImagePickerFor")
{
    <div class="form-group row">
        <label originid="@fieldName" for="@fieldName" class="col-12 col-md-2 col-form-label">
            @fieldTitle
            @if (required)
            {
                <span class="text-danger">*</span>
            }
        </label>
        <div class="col-12 col-md-10">
            <div class="input-group">
                <input type="text" class="form-control" 
                       @(required ? "required" : "")
                       name="@fieldName" id="@fieldName" originid="@fieldName"
                       value="@value" readonly />
                <div class="input-group-append">
                    <button originid="@fieldName" target="@fieldName"
                            class="btn btn-primary waves-effect waves-light btn-ckfinder-popup"
                            type="button">
                        <i class="fe-upload"></i> Duyệt file ..
                    </button>
                </div>
            </div>
            <img id="img-@fieldName" originid="@fieldName" 
                 src="@(string.IsNullOrEmpty(value) ? "/assets/images/no-image.jpg" : value)" 
                 style="margin-top:10px; max-height: 250px; max-width: 100%" />
        </div>
    </div>
}
else if (helper == "ComposeLanguageSwitch")
{
    <div class="form-group row">
        <label for="LangIdCompose" class="col-12 col-md-2 col-form-label">
            Ngôn ngữ nhập
        </label>
        <div class="col-12 col-md-10">
            <div class="input-group">
                <input type="text" class="form-control" id="LangIdCompose" 
                       value="@($"{ViewData["LangIdCompose"]} ({ViewData["LangTitle"]})")" disabled="disabled" />
                <div class="input-group-append">
                    <a href="@Constants.Admin_Url/i18n" class="btn btn-primary" type="button">
                        <i class="fa-exchange"></i> Thay đổi
                    </a>
                </div>
            </div>
        </div>
    </div>
}

